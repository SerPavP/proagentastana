# Скрипт управления правами администратора

## Описание
Скрипт `admin_manager.py` позволяет управлять правами администратора пользователей через командную строку, используя номер телефона как идентификатор.

## Установка
Скрипт готов к использованию. Просто запустите его из корневой папки проекта Django.

## Использование

### Основные команды:

```bash
# Дать права администратора
python admin_manager.py +79999999999 -T

# Убрать права администратора  
python admin_manager.py +79999999999 -F

# Показать статус пользователя
python admin_manager.py +79999999999 -S
```

### Поддерживаемые форматы номеров:

```bash
# Все эти варианты работают одинаково:
python admin_manager.py +79999999999 -T
python admin_manager.py 79999999999 -T
python admin_manager.py 89999999999 -T  # Автоматически заменит 8 на 7
python admin_manager.py 9999999999 -T   # Автоматически добавит +7
```

### Параметры:

- `-T` или `--grant` - Дать права администратора (True)
- `-F` или `--revoke` - Убрать права администратора (False)  
- `-S` или `--status` - Показать статус пользователя
- `-h` или `--help` - Показать справку

## Примеры использования:

### 1. Проверка статуса пользователя
```bash
python admin_manager.py +71231231233 -S
```

### 2. Выдача прав администратора
```bash
python admin_manager.py +79999999999 -T
```

### 3. Убирание прав администратора
```bash
python admin_manager.py +79999999999 -F
```

### 4. Получение справки
```bash
python admin_manager.py --help
```

## Что делает скрипт:

### При выдаче прав (-T):
- Устанавливает `is_staff = True`
- Устанавливает `is_superuser = True`
- Пользователь получает доступ к админке

### При убирании прав (-F):
- Устанавливает `is_staff = False`
- Устанавливает `is_superuser = False`
- Пользователь теряет доступ к админке

### При проверке статуса (-S):
- Показывает полную информацию о пользователе
- Отображает текущие права доступа
- Показывает даты регистрации и обновления

## Безопасность:

- Скрипт работает только с существующими пользователями
- Проверяет корректность номера телефона
- Показывает подробную информацию о выполняемых операциях
- Логирует время выполнения операций

## Требования:

- Django проект должен быть настроен
- Модель User должна использовать телефон как основное поле
- База данных должна быть доступна

## Примечания:

- Номер телефона автоматически форматируется в стандартный вид (+7XXXXXXXXXX)
- Скрипт работает с вашей кастомной моделью User
- Все операции выполняются в базе данных в реальном времени 